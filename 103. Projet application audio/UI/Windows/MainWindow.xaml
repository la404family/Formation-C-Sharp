<Window x:Class="AudioEditor.UI.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AudioEditor.UI.Windows"
        mc:Ignorable="d"
        Title="Anomaly Recorder" 
        Height="800" Width="1200"
        WindowState="Maximized"
        Background="#2D2D30"
        Icon="../../icon.ico">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Menu Principal -->
        <Menu Grid.Row="0" Background="#2D2D30" Foreground="White">
            <MenuItem Header="_Fichier">
                <MenuItem Header="_Nouveau Projet" Click="NewProject_Click" InputGestureText="Ctrl+N"/>
                <MenuItem Header="_Ouvrir Projet..." Click="OpenProject_Click" InputGestureText="Ctrl+O"/>
                <MenuItem Header="_Sauvegarder" Click="SaveProject_Click" InputGestureText="Ctrl+S"/>
                <MenuItem Header="Sauvegarder _sous..." Click="SaveProjectAs_Click" InputGestureText="Ctrl+Shift+S"/>
                <Separator/>
                <MenuItem Header="_Importer Audio..." Click="ImportAudio_Click" InputGestureText="Ctrl+I"/>
                <MenuItem Header="_Exporter Mixage..." Click="ExportMix_Click" InputGestureText="Ctrl+E"/>
                <Separator/>
                <MenuItem Header="_Quitter" Click="Exit_Click" InputGestureText="Alt+F4"/>
            </MenuItem>
            <MenuItem Header="_Édition">
                <MenuItem Header="_Annuler" InputGestureText="Ctrl+Z"/>
                <MenuItem Header="_Refaire" InputGestureText="Ctrl+Y"/>
                <Separator/>
                <MenuItem Header="_Couper" InputGestureText="Ctrl+X"/>
                <MenuItem Header="Co_pier" InputGestureText="Ctrl+C"/>
                <MenuItem Header="C_oller" InputGestureText="Ctrl+V"/>
            </MenuItem>
            <MenuItem Header="_Aide">
                <MenuItem Header="_À propos" Click="About_Click"/>
            </MenuItem>
        </Menu>
        
        <!-- Barre d'outils -->
        <ToolBar Grid.Row="1" Background="#3F3F46" ToolBarTray.IsLocked="True">
            <Button Content="Nouveau" Click="NewProject_Click" ToolTip="Nouveau Projet"/>
            <Button Content="Ouvrir" Click="OpenProject_Click" ToolTip="Ouvrir Projet"/>
            <Button Content="Sauver" Click="SaveProject_Click" ToolTip="Sauvegarder"/>
            <Separator/>
            <Button Content="Import" Click="ImportAudio_Click" ToolTip="Importer Audio"/>
            <Button Content="Export" Click="ExportMix_Click" ToolTip="Exporter Mixage"/>
            <Separator/>
            <Button Content="+ Audio" Click="AddAudioTrack_Click" ToolTip="Ajouter Piste Audio"/>
            <Button Content="+ MIDI" Click="AddMidiTrack_Click" ToolTip="Ajouter Piste MIDI"/>
        </ToolBar>
        
        <!-- Zone principale de mixage -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Panel des pistes (gauche) -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Background="#1E1E1E">
                <StackPanel Name="TracksPanel" Margin="5">
                    <TextBlock Text="PISTES AUDIO" FontWeight="Bold" Margin="0,0,0,10" HorizontalAlignment="Center"/>
                    <!-- Les pistes seront ajoutées dynamiquement ici -->
                </StackPanel>
            </ScrollViewer>
            
            <GridSplitter Grid.Column="1" Width="3" Background="#555" HorizontalAlignment="Center"/>
            
            <!-- Timeline et séquenceur (droite) -->
            <Grid Grid.Column="2" Background="#1A1A1A">
                <Grid.RowDefinitions>
                    <RowDefinition Height="40"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- Règle temporelle -->
                <Border Grid.Row="0" Background="#333" BorderBrush="#555" BorderThickness="0,0,0,1">
                    <Canvas Name="TimeRuler" Height="40">
                        <!-- Timeline sera générée dynamiquement -->
                    </Canvas>
                </Border>
                
                <!-- Zone de séquençage -->
                <ScrollViewer Grid.Row="1" 
                             HorizontalScrollBarVisibility="Auto" 
                             VerticalScrollBarVisibility="Auto"
                             Name="SequencerScrollViewer">
                    <Canvas Name="SequencerCanvas" 
                           Width="2000" 
                           Height="600"
                           Background="#1A1A1A">
                        <!-- Les éléments audio seront ajoutés ici -->
                    </Canvas>
                </ScrollViewer>
            </Grid>
        </Grid>
        
        <!-- Contrôles de transport -->
        <Border Grid.Row="3" Background="#2D2D30" BorderBrush="#555" BorderThickness="0,1,0,0" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Boutons de transport -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button Content="⏮" Width="40" Height="35" Margin="2" ToolTip="Début"/>
                    <Button Content="⏪" Width="40" Height="35" Margin="2" ToolTip="Rembobiner"/>
                    <Button Name="PlayPauseButton" Content="▶" Width="50" Height="35" Margin="2" 
                           Click="PlayPause_Click" FontWeight="Bold" ToolTip="Lecture/Pause"/>
                    <Button Content="⏹" Width="40" Height="35" Margin="2" 
                           Click="Stop_Click" ToolTip="Arrêt"/>
                    <Button Content="⏺" Width="40" Height="35" Margin="2" 
                           Click="Record_Click" ToolTip="Enregistrer"/>
                    <Button Content="⏩" Width="40" Height="35" Margin="2" ToolTip="Avance rapide"/>
                    <Button Content="⏭" Width="40" Height="35" Margin="2" ToolTip="Fin"/>
                </StackPanel>
                
                <!-- Temps et position -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="Position:" Margin="10,0,5,0" VerticalAlignment="Center"/>
                    <TextBlock Name="PositionDisplay" Text="00:00.000" FontFamily="Consolas" 
                              FontSize="14" VerticalAlignment="Center" Margin="0,0,20,0"/>
                    <TextBlock Text="Durée:" Margin="10,0,5,0" VerticalAlignment="Center"/>
                    <TextBlock Name="DurationDisplay" Text="00:00.000" FontFamily="Consolas" 
                              FontSize="14" VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Volume principal -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Volume Principal:" Margin="0,0,5,0" VerticalAlignment="Center"/>
                    <Slider Name="MasterVolumeSlider" Width="100" Minimum="0" Maximum="100" Value="75" 
                           VerticalAlignment="Center" ValueChanged="MasterVolume_ValueChanged"/>
                    <TextBlock Name="MasterVolumeDisplay" Text="75%" Width="30" 
                              VerticalAlignment="Center" Margin="5,0,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Barre de statut -->
        <StatusBar Grid.Row="4" Background="#007ACC" Foreground="White" Height="25">
            <StatusBarItem>
                <TextBlock Name="StatusText" Text="Prêt"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Pistes: "/>
                    <TextBlock Name="TrackCountDisplay" Text="0"/>
                    <TextBlock Text=" | CPU: "/>
                    <TextBlock Name="CpuUsageDisplay" Text="0%"/>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>