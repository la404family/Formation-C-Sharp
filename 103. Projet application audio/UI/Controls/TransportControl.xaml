<UserControl x:Class="AudioEditor.UI.Controls.TransportControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="60" d:DesignWidth="600">
    <UserControl.Resources>
        <Style x:Key="TransportButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="#FF505050"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#FF707070"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FF606060"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#FF404040"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="RecordButtonStyle" TargetType="Button" BasedOn="{StaticResource TransportButtonStyle}">
            <Setter Property="Background" Value="#FF8B4513"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FFA0522D"/>
                </Trigger>
                <DataTrigger Binding="{Binding IsRecording}" Value="True">
                    <Setter Property="Background" Value="#FFFF4444"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="PlayButtonStyle" TargetType="Button" BasedOn="{StaticResource TransportButtonStyle}">
            <Setter Property="Background" Value="#FF228B22"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FF32CD32"/>
                </Trigger>
                <DataTrigger Binding="{Binding IsPlaying}" Value="True">
                    <Setter Property="Background" Value="#FF00FF00"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        
        <Style x:Key="ProgressSliderStyle" TargetType="Slider">
            <Setter Property="Height" Value="20"/>
            <Setter Property="Background" Value="#FF404040"/>
            <Setter Property="Foreground" Value="#FF00BFFF"/>
        </Style>
    </UserControl.Resources>
    
    <Border Background="#FF3E3E42" BorderBrush="#FF555555" BorderThickness="1">
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Barre de progression et affichage du temps -->
            <Grid Grid.Row="0" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                
                <!-- Temps actuel -->
                <Border Grid.Column="0" Background="#FF2D2D30" BorderBrush="#FF555555" BorderThickness="1" CornerRadius="2">
                    <Label Name="CurrentTimeLabel" 
                           Content="00:00.00" 
                           Foreground="#FF00BFFF" 
                           FontFamily="Consolas" 
                           FontSize="11"
                           FontWeight="Bold"
                           HorizontalContentAlignment="Center"
                           VerticalContentAlignment="Center"/>
                </Border>
                
                <!-- Barre de progression -->
                <Border Grid.Column="1" Background="#FF2D2D30" BorderBrush="#FF555555" BorderThickness="1" CornerRadius="2" Margin="5,0">
                    <Grid Margin="2">
                        <Rectangle Name="ProgressBackground" Fill="#FF404040" RadiusX="1" RadiusY="1"/>
                        <Rectangle Name="ProgressBar" Fill="#FF00BFFF" RadiusX="1" RadiusY="1" HorizontalAlignment="Left" Width="0"/>
                        <Canvas Name="ProgressCanvas" Background="Transparent" MouseLeftButtonDown="ProgressCanvas_MouseLeftButtonDown">
                            <Line Name="ProgressIndicator" 
                                  Stroke="#FFFF6B6B" 
                                  StrokeThickness="2" 
                                  Y1="0" 
                                  Y2="16"/>
                        </Canvas>
                    </Grid>
                </Border>
                
                <!-- Temps total -->
                <Border Grid.Column="2" Background="#FF2D2D30" BorderBrush="#FF555555" BorderThickness="1" CornerRadius="2">
                    <Label Name="TotalTimeLabel" 
                           Content="00:00.00" 
                           Foreground="#FFAAAAAA" 
                           FontFamily="Consolas" 
                           FontSize="11"
                           FontWeight="Bold"
                           HorizontalContentAlignment="Center"
                           VerticalContentAlignment="Center"/>
                </Border>
                
                <!-- BPM / Tempo -->
                <Border Grid.Column="3" Background="#FF2D2D30" BorderBrush="#FF555555" BorderThickness="1" CornerRadius="2" Margin="5,0,0,0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Label Content="BPM" Foreground="#FFAAAAAA" FontSize="8" Padding="2,0"/>
                        <TextBox Name="BpmTextBox" 
                                 Text="120" 
                                 Width="30" 
                                 Height="16"
                                 Background="Transparent" 
                                 Foreground="White" 
                                 BorderThickness="0"
                                 FontFamily="Consolas"
                                 FontSize="10"
                                 TextAlignment="Center"
                                 VerticalContentAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- Boutons de transport -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                
                <!-- Bouton Rewind -->
                <Button Name="RewindButton" 
                        Style="{StaticResource TransportButtonStyle}"
                        Click="RewindButton_Click"
                        ToolTip="Retour au début">
                    <Path Fill="White" Data="M11,18V6L8.5,12M6.5,6V18H5V6H6.5Z"/>
                </Button>
                
                <!-- Bouton Stop -->
                <Button Name="StopButton" 
                        Style="{StaticResource TransportButtonStyle}"
                        Click="StopButton_Click"
                        ToolTip="Arrêter">
                    <Rectangle Width="16" Height="16" Fill="White"/>
                </Button>
                
                <!-- Bouton Play/Pause -->
                <Button Name="PlayPauseButton" 
                        Style="{StaticResource PlayButtonStyle}"
                        Click="PlayPauseButton_Click"
                        ToolTip="Lecture/Pause">
                    <Grid>
                        <!-- Icône Play -->
                        <Path Name="PlayIcon" 
                              Fill="White" 
                              Data="M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"
                              Visibility="Visible"/>
                        <!-- Icône Pause -->
                        <Path Name="PauseIcon" 
                              Fill="White" 
                              Data="M14,19H18V5H14M6,19H10V5H6V19Z"
                              Visibility="Collapsed"/>
                    </Grid>
                </Button>
                
                <!-- Bouton Record -->
                <Button Name="RecordButton" 
                        Style="{StaticResource RecordButtonStyle}"
                        Click="RecordButton_Click"
                        ToolTip="Enregistrer">
                    <Ellipse Width="20" Height="20" Fill="White"/>
                </Button>
                
                <!-- Séparateur -->
                <Separator Margin="10,0" Background="#FF555555" Width="1"/>
                
                <!-- Bouton Loop -->
                <Button Name="LoopButton" 
                        Style="{StaticResource TransportButtonStyle}"
                        Click="LoopButton_Click"
                        ToolTip="Mode boucle">
                    <Path Fill="White" Data="M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z"/>
                </Button>
                
                <!-- Bouton Metronome -->
                <Button Name="MetronomeButton" 
                        Style="{StaticResource TransportButtonStyle}"
                        Click="MetronomeButton_Click"
                        ToolTip="Métronome">
                    <Path Fill="White" Data="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6L14.75,10.5L10.5,10.5L12,6M11.5,11.5H12.5V17.5H11.5V11.5Z"/>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>